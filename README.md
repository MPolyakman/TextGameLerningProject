# Текстовая игра в жанре roguelike с поддержкой искусственного интеллекта

## Архитектура

В проекте используется event-driven архитектура. Любой объект типа item, entity их наследники не исполняют влияющие на игровой процесс действия сами по себе а только запускают функции, возвращающие Event объекты. Эти ивенты испускаются диспечером ивентов и все подписанные на ТИП ивента методы объектов систем исполняют уже влияющие на игрвой процесс действия.

### Entity

От класса Entity наследуется разумный класс NPC обладающий методами связаными с диалоговой системой и вызовом ИИ.

#### Именные методы взаимодействия

Класс Entity и все его наследники обладает именными методами

- [ ] **Take**
- [ ] **Put**
- [ ] **Give**
- [ ] **Attack**

Разумный класс и его наследники обладают так же следующими методами

- [ ] **Say**
- [ ] **Listen**

### Items

Класс внутригровых объектов.

#### UseItem

Наследование от обычного Item с именным методом **Use**.

Все методы возвращают только ивенты. Listen должен решать какое будет следующее взаимодействие и возвращать ивент выбирая из других доступных действий.

### Map

Карта состоит из ориентированого графа (в будущем, возможно, из множества графов) где каждая вершина (class Room) имеет не больше 4 инцидентных вершин (в будущем 6) каждое ребро (class Path) имеет ссылку на другую комнату и ассоциированый объект (дверь ловушка портал и т. д.). Структура вершин графа не гарантирует, что проход в одну строну ведет и обратно.

### Events

Все объекты наследники класса Event являются информационными обектами.

### EventDispatcher

Диспетчер задач обладает атрибутом-словарем {type(Event): [functions]}

На метод subscribe он добавляет в список функцию системы self.method по ключу типа ивента. В саму функцию всегда должен передаваться ивент.

На метод emit вызывается КАЖДАЯ функция подписаная на свой тип ивента и в нее передаётся сам ивент.

### Systems

Каждая система обладает атрибутами над которыми имеет право производить действия. Система персонажей - словарь персонажей по имени, система карты - граф и так далее.

При инициализации системы подписывают свои методы на диспетчер ивентов.
